<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>後台紀錄</title>
<style>
:root{
  --bg:#6c6c6c;             
  --card:#ffffff;            
  --primary:#002b88;         
  --primary-light:#3b82f6;   
  --danger:#ef4444;          
  --muted:#6b7280;           
  --shadow:0 6px 18px rgba(15,23,42,0.08); 
  --radius:12px;             
  font-family:-apple-system, BlinkMacSystemFont,'Segoe UI', Roboto,'Noto Sans TC','Microsoft JhengHei',sans-serif;
}

html,body{ height:100%; margin:0; background:var(--bg); }
body{ padding:24px; display:flex; justify-content:center; }

.card{ 
    width:100%; max-width:980px; 
    background:var(--card); border-radius:var(--radius); 
    box-shadow:var(--shadow); overflow:hidden; margin-top:20px; 
}

.header{ display:flex; align-items:center; justify-content:space-between; gap:12px; padding:16px 20px; background:var(--primary); color:white; }
.title{ font-size:20px; font-weight:600; }

.search-row { display:flex; align-items:center; gap:12px; padding:12px 20px; background:#f9fafb; border-radius:8px; margin:0 16px 12px 16px; flex-wrap:wrap; }
.search-row .form-group{ display:flex; align-items:center; gap:6px; }
.search-row label{ font-size:15px; font-weight:500; color:var(--muted); white-space:nowrap; line-height:32px; }
.search-row input{ height:32px; padding:4px 8px; border-radius:6px; border:1px solid #ccc; font-size:14px; background:#fff; }
.search-row input[type="text"]{ width:120px; }
.btn-search{ height:32px; padding:0 14px; border-radius:6px; background:var(--primary-light); color:#fff; border:none; cursor:pointer; font-weight:600; font-size:14px; display:flex; align-items:center; justify-content:center; }

.list{ width:100%; border-top:1px solid #eee; border-bottom:1px solid #eee; margin-top:0; }
.list-head{ display:flex; gap:12px; padding:10px 8px; align-items:center; color:var(--muted); font-weight:700; background:#f9fafb; }
.list-row{ display:flex; align-items:center; gap:12px; padding:12px 8px; border-bottom:1px solid #f2f2f2; }
.col-1{ width:60px; flex-shrink:0; text-align:center; color:var(--muted); }
.col-2,.col-3{ flex:1; min-width:120px; }
.col-4,.col-5{ width:120px; flex-shrink:0; text-align:center; }
.empty{ padding:28px; text-align:center; color:var(--muted); }

#topBtn{ position:fixed; right:20px; bottom:20px; width:44px; height:44px; background:var(--primary-light); color:white; border:none; border-radius:8px; display:none; align-items:center; justify-content:center; cursor:pointer; z-index:200; }
#topBtn:hover{ background:#0056b3; }

@media (max-width:720px){
  .list-head{ font-size:13px; }
  .col-2,.col-3{ min-width:80px; }
  .search-row{ gap:8px; }
}
</style>
</head>
<body>

<div class="card" id="mainCard">
  <div class="header">
    <div class="title">後台紀錄</div>
  </div>

  <div class="search-row" role="search" aria-label="搜尋後台紀錄">
    <div class="form-group">
      <label for="nameInput">姓名</label>
      <input type="text" id="nameInput" placeholder="輸入姓名">
    </div>
    <div class="form-group">
      <label for="startDate">開始日期</label>
      <input type="date" id="startDate">
    </div>
    <div class="form-group">
      <label for="endDate">結束日期</label>
      <input type="date" id="endDate">
    </div>
    <button class="btn-search" onclick="searchLogs()">搜尋</button>
  </div>

  <div id="countText" style="padding:8px 20px;color:var(--muted)">共 0 筆資料</div>

  <div class="list" aria-live="polite">
    <div class="list-head">
      <div class="col-1">序號</div>
      <div class="col-2">帳號</div>
      <div class="col-3">姓名</div>
      <div class="col-4">動作</div>
      <div class="col-5">時間</div>
    </div>
    <div id="rowsContainer">
      <div class="empty">載入中...</div>
    </div>
  </div>
</div>

<button id="topBtn" onclick="scrollToTop()">TOP</button>

<script>
// 假資料示範，每次登入或登出都新增一筆
let logs = [
  {id:1, account:'user01', name:'王小明', action:'登入', datetime:'2025-12-18T08:20:15'},
  {id:2, account:'user01', name:'王小明', action:'登出', datetime:'2025-12-18T12:30:00'},
  {id:3, account:'user02', name:'李小華', action:'登入', datetime:'2025-12-18T09:15:40'},
  {id:4, account:'user03', name:'陳大文', action:'登入', datetime:'2025-12-17T14:05:22'},
  {id:5, account:'user02', name:'李小華', action:'登出', datetime:'2025-12-18T18:00:00'},
  {id:6, account:'user04', name:'林小英', action:'登入', datetime:'2025-12-16T10:12:50'}
];
logs.sort((a,b)=>new Date(b.datetime)-new Date(a.datetime));

const rowsContainer=document.getElementById('rowsContainer');
const countText=document.getElementById('countText');

function render(list){
  rowsContainer.innerHTML='';
  if(!list||list.length===0){
    rowsContainer.innerHTML='<div class="empty">查無資料</div>';
    countText.textContent='共 0 筆資料';
    return;
  }
  countText.textContent='共 '+list.length+' 筆資料';
  list.forEach((e,idx)=>{
    const dt=new Date(e.datetime);
    const row=document.createElement('div'); row.className='list-row';
    row.innerHTML=`
      <div class="col-1">${idx+1}</div>
      <div class="col-2">${e.account}</div>
      <div class="col-3">${e.name}</div>
      <div class="col-4">${e.action}</div>
      <div class="col-5">${formatDateTime(dt)}</div>
    `;
    rowsContainer.appendChild(row);
  });
}

function formatDateTime(d){
  const y=d.getFullYear(); 
  const m=String(d.getMonth()+1).padStart(2,'0'); 
  const day=String(d.getDate()).padStart(2,'0'); 
  const hh=String(d.getHours()).padStart(2,'0'); 
  const mm=String(d.getMinutes()).padStart(2,'0'); 
  const ss=String(d.getSeconds()).padStart(2,'0'); 
  return `${y}-${m}-${day} ${hh}:${mm}:${ss}`;
}

function searchLogs(){
  const nameVal=document.getElementById('nameInput').value.trim();
  const start=document.getElementById('startDate').value;
  const end=document.getElementById('endDate').value;

  let filtered = logs.slice();
  if(nameVal) filtered = filtered.filter(e=>e.name.includes(nameVal));
  if(start) filtered = filtered.filter(e=>e.datetime.slice(0,10)>=start);
  if(end) filtered = filtered.filter(e=>e.datetime.slice(0,10)<=end);

  filtered.sort((a,b)=>new Date(b.datetime)-new Date(a.datetime));
  render(filtered);
}

const topBtn=document.getElementById('topBtn');
window.addEventListener('scroll',()=>{topBtn.style.display=(window.scrollY>120)?'flex':'none';});
function scrollToTop(){window.scrollTo({top:0,behavior:'smooth'});}

// 初始化
render(logs);
</script>
</body>
</html>

