<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>åœ°éœ‡ç™¼å ±è¨­å®š</title>

<style>
/* ================= å…¨å±€è®Šæ•¸ ================= */
:root{
  --bg:#6c6c6c;
  --card:#ffffff;
  --primary:#002b88;
  --primary-light:#3b82f6;
  --muted:#6b7280;
  --shadow:0 6px 18px rgba(15,23,42,0.08);
  --radius:12px;
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Noto Sans TC','Microsoft JhengHei',sans-serif;
}

html,body{
  height:100%;
  margin:0;
  background:var(--bg);
}

body{
  padding:24px;
  display:flex;
  justify-content:center;
}

/* ================= å¡ç‰‡ ================= */
.card{
  width:100%;
  max-width:1000px;
  background:var(--card);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  overflow:hidden;
}

/* ================= header ================= */
.header{
  padding:16px 20px;
  background:var(--primary);
  color:#fff;
  font-size:20px;
  font-weight:600;
}

/* ================= æœå°‹å€ ================= */
.search-row{
  display:flex;
  gap:12px;
  align-items:center;
  padding:12px 20px;
  background:#f9fafb;
  flex-wrap:wrap;
}

.search-row label{
  color:var(--muted);
  font-weight:500;
}

.search-row select{
  height:32px;
  padding:4px 8px;
  border-radius:6px;
  border:1px solid #ccc;
}

.btn-search{
  height:32px;
  padding:0 16px;
  border:none;
  border-radius:6px;
  background:var(--primary-light);
  color:#fff;
  font-weight:600;
  cursor:pointer;
}

.btn-cancel{
  height:32px;
  padding:0 16px;
  border-radius:6px;
  border:1px solid #ccc;
  background:#ffffff;
  color:#374151;
  font-weight:600;
  cursor:pointer;
}

.btn-cancel:hover{
  background:#f3f4f6;
}

/* ================= åˆ—è¡¨ ================= */
.count{
  padding:8px 20px;
  color:var(--muted);
}

.list{
  border-top:1px solid #eee;
}

.list-head,
.list-row{
  display:flex;
  gap:12px;
  align-items:center;
  padding:10px 8px;
}

.list-head{
  background:#f9fafb;
  font-weight:700;
  color:var(--muted);
}

.list-row{
  border-top:1px solid #f2f2f2;
}

.col-1{width:50px;text-align:center;}
.col-2{width:120px;}
.col-3{width:100px;}
.col-4{width:120px;}
.col-5{flex:1;}
.col-6{flex:1;}
.col-7{width:110px;text-align:center;}

.icon-btn{
  padding:6px 10px;
  border-radius:8px;
  border:1px solid #ddd;
  background:#fff;
  cursor:pointer;
}

.empty{
  padding:28px;
  text-align:center;
  color:var(--muted);
}

/* ================= modal ================= */
.modal-backdrop{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.45);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:100;
}

.modal{
  background:#fff;
  border-radius:12px;
  width:92%;
  max-width:520px;
  overflow:hidden;
}

.modal-header{
  padding:14px 18px;
  background:var(--primary);
  color:#fff;
  font-weight:600;
}

.modal-body{
  padding:18px;
}

.modal-footer{
  padding:12px 18px;
  background:#f9fafb;
  display:flex;
  justify-content:flex-end;
  gap:8px;
}

.modal-body .form-group{
  margin-bottom:14px;
}

.modal-body label{
  display:block;
  font-weight:600;
  margin-bottom:6px;
}

.modal-body input,
.modal-body select{
  width:100%;
  height:34px;
  border-radius:6px;
  border:1px solid #ccc;
  padding:4px 8px;
}

.modal-body input[disabled]{
  background:#f3f4f6;
}

/* ================= TOP ================= */
#topBtn{
  position:fixed;
  right:20px;
  bottom:20px;
  width:44px;
  height:44px;
  border:none;
  border-radius:8px;
  background:var(--primary-light);
  color:#fff;
  display:none;
  cursor:pointer;
  z-index:200;
}
</style>
</head>

<body>
<div class="card">

  <div class="header">åœ°éœ‡ç™¼å ±è¨­å®š</div>

  <!-- æœå°‹ -->
  <div class="search-row">
    <label>ç¸£å¸‚</label>
    <select id="citySelect"></select>

    <label>é„‰é®</label>
    <select id="townSelect"></select>

    <button class="btn-search" onclick="search()">æœå°‹</button>
  </div>

  <div class="count" id="countText">å…± 0 ç­†è³‡æ–™</div>

  <!-- åˆ—è¡¨ -->
  <div class="list">
    <div class="list-head">
      <div class="col-1">åºè™Ÿ</div>
      <div class="col-2">ID</div>
      <div class="col-3">ç¸£å¸‚</div>
      <div class="col-4">é„‰é®</div>
      <div class="col-5">åç¨±</div>
      <div class="col-6">ç™¼å ±è¨­å®š</div>
      <div class="col-7">æ“ä½œ</div>
    </div>
    <div id="rows"></div>
  </div>
</div>

<!-- ç™¼å ±è¨­å®š Modal -->
<div class="modal-backdrop" id="settingModal">
  <div class="modal">
    <div class="modal-header">ç™¼å ±è¨­å®š</div>

    <div class="modal-body">
      <div class="form-group">
        <label>ID</label>
        <input id="setId" disabled />
      </div>

      <div class="form-group">
        <label>ç™¼å ±é–€æª»</label>
        <select id="setThreshold">
          <option>1ç´š</option>
          <option>2ç´š</option>
          <option>3ç´š</option>
          <option>4ç´š</option>
          <option>5å¼±</option>
          <option>5å¼·</option>
          <option>6å¼±</option>
          <option>6å¼·</option>
          <option>7ç´š</option>
        </select>
      </div>

      <div class="form-group">
        <label>ç™¼å ±æ™‚é–“ï¼ˆ24 å°æ™‚åˆ¶ï¼‰</label>
        <div style="display:flex;gap:6px;align-items:center">
          <select id="startH"></select>ï¼š
          <select id="startM"></select>
          <span>ï½</span>
          <select id="endH"></select>ï¼š
          <select id="endM"></select>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn-search" onclick="saveSetting()">å„²å­˜</button>
      <button class="btn-cancel" onclick="closeSetting()">å–æ¶ˆ</button>
    </div>
  </div>
</div>

<button id="topBtn" onclick="scrollToTop()">TOP</button>

<script>
/* ================= å‡è³‡æ–™ ================= */
const data=[
 {id:'A001',city:'å°åŒ—å¸‚',town:'å…§æ¹–å€',name:'ä¸»æ©Ÿä¸€',threshold:'5å¼±',start:'08:00',end:'18:00'},
 {id:'A002',city:'æ–°åŒ—å¸‚',town:'æ¿æ©‹å€',name:'ä¸»æ©ŸäºŒ',threshold:'6å¼±',start:'00:00',end:'23:59'},
 {id:'A003',city:'å°åŒ—å¸‚',town:'å¤§å®‰å€',name:'ä¸»æ©Ÿä¸‰',threshold:'4ç´š',start:'09:00',end:'17:30'}
];

const cityTown={
 'å°åŒ—å¸‚':['å…§æ¹–å€','å¤§å®‰å€'],
 'æ–°åŒ—å¸‚':['æ¿æ©‹å€','æ–°åº—å€']
};

let currentSetting=null;

/* ================= ä¸‹æ‹‰åˆå§‹åŒ– ================= */
const citySel=document.getElementById('citySelect');
const townSel=document.getElementById('townSelect');

citySel.innerHTML='<option value="-">-</option>';
Object.keys(cityTown).forEach(c=>{
 citySel.innerHTML+=`<option>${c}</option>`;
});

citySel.onchange=()=>{
 townSel.innerHTML='<option value="-">-</option>';
 (cityTown[citySel.value]||[]).forEach(t=>{
  townSel.innerHTML+=`<option>${t}</option>`;
 });
};

/* ================= æ™‚é–“é¸å–® ================= */
function initTimeSelect(){
 ['startH','endH'].forEach(id=>{
  const sel=document.getElementById(id);
  for(let i=0;i<24;i++){
    sel.innerHTML+=`<option>${String(i).padStart(2,'0')}</option>`;
  }
 });
 ['startM','endM'].forEach(id=>{
  const sel=document.getElementById(id);
  for(let i=0;i<60;i++){
    sel.innerHTML+=`<option>${String(i).padStart(2,'0')}</option>`;
  }
 });
}
initTimeSelect();

/* ================= æ¸²æŸ“ ================= */
function render(list){
 const rows=document.getElementById('rows');
 rows.innerHTML='';
 document.getElementById('countText').textContent=`å…± ${list.length} ç­†è³‡æ–™`;

 if(!list.length){
  rows.innerHTML='<div class="empty">æŸ¥ç„¡è³‡æ–™</div>';
  return;
 }

 list.forEach((e,i)=>{
  rows.innerHTML+=`
  <div class="list-row">
    <div class="col-1">${i+1}</div>
    <div class="col-2">${e.id}</div>
    <div class="col-3">${e.city}</div>
    <div class="col-4">${e.town}</div>
    <div class="col-5">${e.name}</div>
    <div class="col-6">${e.threshold} / ${e.start}ï½${e.end}</div>
    <div class="col-7">
      <button class="icon-btn" onclick="openSetting('${e.id}')">ç™¼å ±è¨­å®š</button>
    </div>
  </div>`;
 });
}

/* ================= æœå°‹ ================= */
function search(){
 const c=citySel.value,t=townSel.value;
 const f=data.filter(e=>(c=='-'||e.city==c)&&(t=='-'||e.town==t));
 render(f);
}

/* ================= ç™¼å ±è¨­å®š ================= */
function openSetting(id){
 const e=data.find(x=>x.id===id);
 if(!e) return;

 currentSetting=e;
 setId.value=e.id;
 setThreshold.value=e.threshold;

 const [sh,sm]=e.start.split(':');
 const [eh,em]=e.end.split(':');

 startH.value=sh;
 startM.value=sm;
 endH.value=eh;
 endM.value=em;

 settingModal.style.display='flex';
}

function saveSetting(){
 currentSetting.threshold=setThreshold.value;
 currentSetting.start=`${startH.value}:${startM.value}`;
 currentSetting.end=`${endH.value}:${endM.value}`;

 closeSetting();
 render(data);

 // ğŸ‘‰ æœªä¾† API åœ¨é€™è£¡é€
}

function closeSetting(){
 settingModal.style.display='none';
}

/* ================= TOP ================= */
const topBtn=document.getElementById('topBtn');
window.addEventListener('scroll',()=>{
 topBtn.style.display=window.scrollY>120?'block':'none';
});
function scrollToTop(){
 window.scrollTo({top:0,behavior:'smooth'});
}

/* ================= init ================= */
render(data);
</script>
</body>
</html>
